<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TD2 exo1</title>

  <!-- GSAP, voir https://greensock.com/docs/v3/Installation#installer -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <!-- utilisation du mixin SVGelement -->
  <script src="svgelement.js"></script>

  <!-- styles -->
  <style>
    h1 {
      font-family: sans-serif;
      background-color: rgb(249, 255, 240);
      margin: 0px;
    }
    text {
      text-anchor: middle;
      font-size: 24px;
      font-family: "sans-serif";
      stroke: none;
      letter-spacing: 0px;
    }
  </style>
</head>

<body>
  <h1>Titre dans un dessin SVG</h1>
  <!-- dessin SVG créé et modifié par les scripts JS -->
  <svg xmlns="http://www.w3.org/2000/svg"
        width="30%"
        viewBox="0 0 100 100"
        id="dessin">
    <!-- texte qui va être animé de différentes manières -->
    <text id="titre" x="0" y="0">Bonjour</text>
  </svg>

  <!-- panneau de boutons pour animer le titre -->
  <div style="margin: 10px;">
    <button onclick="reset()">Reset</button>
    <button onclick="animation1()">Animation 1</button>
    <button onclick="animation2()">Animation 2</button>
    <button onclick="animation3()">Animation 3</button>
    <button onclick="animation4()">Animation 4</button>
    <button onclick="animation5()">Animation 5</button>
  </div>

  <script>
// éléments du dessin SVG
const titre = SVGelement.fromSelector("#titre")

// mettre en place la situation de départ commune
function reset() {
  // interrompre les animations du titre
  gsap.killTweensOf(titre);
  // définir l'état au repos
  gsap.set(titre, {
    x: 0,   // piège : x et y ici sont des translations, voir transform-origin
    y: 0,
    scale: 1,
    fill: "black",
    font: "24px sans-serif",
    letterSpacing: "0px",
    attr: {
      x: 50,  // piège : ici, x et y sont des positions
      y: 50,
      fill: "black",
      opacity: 1,
      "transform-origin": "100 50", // référence des translations
    }
  })
}

// appeler la fonction une première fois
reset()


function animation1() {
  // mettre en place la situation de départ
  reset()
  gsap.set(titre, {
    y: -60,     // translation
//    attr: {
//      y: -10,       // position
//    },
  })
  // animer vers la situation finale
  gsap.to(titre, {
    y: 0,     // translation
//    attr: {
//      y: 50,       // position
//    },
    duration: 2,
    ease: "power2.out",
  })
}

function animation2() {
  // mettre en place la situation de départ
  reset()
  gsap.set(titre, {
    // TODO mettre opacity à 0
    opacity: 0,
  })
  // animer vers la situation finale
  gsap.to(titre, {
    // TODO mettre opacity à 1
    opacity: 1,
    delay: 1,
    duration: 2,
    ease: "power2.in",
  })
}

function animation3() {
  // mettre en place la situation de départ
  reset()
  gsap.set(titre, {
    // TODO mettre fill à red
    fill: "red",
  })
  // animer vers la situation finale
  gsap.to(titre, {
    // TODO mettre fill à cyan
    fill: "cyan",
    duration: 6,
    ease: "none",
  })
}

function animation4() {
  // mettre en place la situation de départ
  reset()
  gsap.set(titre, {
    // TODO mettre le style à 'font: 0px sans-serif;'
    style: "font: 0px sans-serif;",
  })
  // animer vers la situation finale
  gsap.to(titre, {
    // TODO mettre le style à 'font: 24px sans-serif;'
    style: "font: 24px sans-serif;",
    duration: 2,
    ease: "power2.in",
  })
}

function animation5() {
  // mettre en place la situation de départ
  reset()
  gsap.set(titre, {
    // TODO initialiser à 'font: 24px sans-serif; letter-spacing: 20px'
    attr: {
      style: "font: 24px sans-serif; letter-spacing: 20px",
    },
  })
  // animer vers la situation finale
  gsap.to(titre, {
    // TODO animer vers 'font: 24px sans-serif; letter-spacing: 0px'
    attr: {
      style: "font: 24px sans-serif; letter-spacing: 0px",
    },
    duration: 2,
    ease: "power2.out",
  })
}

  </script>
</body>
</html>
